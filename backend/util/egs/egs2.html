<!DOCTYPE html PUBLIC "-//WAPFORUM//DTD XHTML Mobile 1.0//EN" "http://www.wapforum.org/DTD/xhtml-mobile10.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>EGS2</title>
</head>
<script src="./js/jquery.min.js"></script>
<body>
<p>
  <label>知道保额算保费:</label>
  <br />
  <label>请选择地区:</label>
  &nbsp;&nbsp;
  <select name="area" id="area" >
    <option value="0" selected="selected">香港</option>
    <option value="1">大陆</option>
  </select>
  <label>请选择性别:</label>
  &nbsp;&nbsp;
  <select name="SEX" id="sex" >
    <option value="0" selected="selected">男性</option>
    <option value="1">女性</option>
  </select>
  <label>请选择吸烟状态:</label>
  &nbsp;&nbsp;
  <select name="smoke" id="smoke">
    <option value="1">吸烟</option>
    <option value="0" selected="selected">非吸烟</option>
  </select>
  
  <br />
  <label>请输入年龄:</label>
  &nbsp;&nbsp;<input name="age" type="text" value="30" id="age" /><br />
  <label>请选择供款年期:</label>
  &nbsp;&nbsp;
  <select name="nian" id="nian">
    <option value="1" selected="selected">5年</option>
    <option value="2">8年</option>
    <option value="3">12年</option>
  </select>
  
  <label>请输入保额:</label>
  &nbsp;&nbsp;<input name="be" type="text" id="be" value="" />
  <label>万美元</label>
  
  <input name="立即计算" type="button"  onclick="chk_bx()" value="立即计算"/>
  <input name="生成计划书" type="button"  onclick="mak_plan()" value="生成计划书"/>
  <br />
  <label>您需要的保费:</label>
  &nbsp;&nbsp;<input name="bf" type="text" id="bf" value="" readonly="readonly" />
  <label>美元</label>
  <input name="basic_bf" type="hidden" value="" id="basic_bf" />
  <br/>
  
  
  <label>知道保费算保额:</label>
  <br />
  <label>请选择地区:</label>
  &nbsp;&nbsp;
  <select name="area1" id="area1" >
    <option value="0" selected="selected">香港</option>
    <option value="1">大陆</option>
  </select>
  <label>请选择性别:</label>
  &nbsp;&nbsp;
  <select name="SEX" id="sex1" >
    <option value="0" selected="selected">男性</option>
    <option value="1">女性</option>
  </select>
  <label>请选择吸烟状态:</label>
  &nbsp;&nbsp;
  <select name="smoke" id="smoke1">
    <option value="1">吸烟</option>
    <option value="0" selected="selected">非吸烟</option>
  </select>
  <label>请选择供款年期:</label>
  &nbsp;&nbsp;
  <select name="nian1" id="nian1">
    <option value="0">整付</option>
    <option value="1" selected="selected">5年</option>
    <option value="2">8年</option>
    <option value="3">12年</option>
  </select>
  <br />
  <label>请输入年龄:</label>
  &nbsp;&nbsp;<input name="age" type="text" value="30" id="age1" /><br />
  
  <label>请输入保费:</label>
  &nbsp;&nbsp;<input name="bf" type="text" id="bf1" value="" />
  <label>美元</label>
  
  <input name="立即计算" type="button"  onclick="chk_bx1()" value="立即计算"/>
  <br />
  <label>您需要的保额:</label>
  &nbsp;&nbsp;<input name="be" type="text" id="be1" value="" readonly="readonly" />
  <label>万美元</label>
  
</p>

<table width="100%" border="1" id="tbl">
  <tr>
    <td rowspan="2" align="center">年龄</td>
    <td rowspan="2" align="center">保费总额</td>
    <td colspan="3" align="center">退保价值</td>
    <td colspan="5" align="center">身故赔偿</td>
  </tr>
  <tr>
    <td align="center">保证退保价值</td>
    <td align="center">非保证退保红利</td>
    <td align="center">退保总额</td>
    <td align="center">最低身故赔偿金</td>
    <td align="center">保证理赔金额</td>
    <td align="center">非保证理赔红利</td>
    <td align="center">赔偿总额</td>
    <td align="center">实际赔偿金额</td>
  </tr>
  
  
</table>

<p>&nbsp;</p>
</body>

</html>
<script src="js/Non-Guaranteed Bonus.js"></script>
<script type="text/javascript">

  
 
//   for(var k=1;k<66;k++){    //一维长度为i,i为变量，可以根据实际情况改变，k为年龄1-66岁,i为项目，0为保单年度终结，1-非保证退保价值，2-非保证理赔红利
//   
//   
//	   //一维数组里面每个元素数组可以包含的数量p，p也是一个变量；j=0,保单年度终结；j=1,非保证退保红利；j=2，非保证理赔红利
//	 
//	  for(var i=0;i<2;i++){
//	        document.write("arr_Bonus[20]["+k+"]["+i+"] = [<br/>");	   }
//	 }
//	 document.write("<br/>");

  

//计算保费
function chk_bx(){
var bx_nian = parseInt($("#nian").val()); //供款年期
var bx_be = $("#be").val(); //保额

if (bx_be==''){
 alert("请输入保额!");
  $("#be").focus();
  return false;	
}

console.log(bx_nian , bx_be);
var bfl = chk_bfl(bx_nian,bx_be);
$("#bf").val(bfl) ;
}

//计算保额
function chk_bx1(){
var bx_nian = parseInt($("#nian1").val()); //供款年期
var bx_bf = parseInt($("#bf1").val()); //保费

if (bx_bf==''){
 alert("请输入保费金额!");
  $("#bf1").focus();
  return false;	
}
console.log(bx_nian , bx_bf);
$("#be1").val(CHK_be(bx_nian,bx_bf)) ;
}

//生成计划书
function mak_plan(){
	
//var bx_area = $("#area").val(); //地区
//var bx_sex = $("#sex").val(); //性别
var bx_age = parseInt($("#age").val()); //年龄	
//var bx_smoke = $("#smoke").val(); //是否吸烟
var bx_nian = parseInt($("#nian").val()); //供款年期
var bx_be = $("#be").val(); //保额
var bx_bf = Math.round($("#bf").val()); //保费
var x,tmp_bf = 0,arr_bf  = new Array();//记录保费数据

var trHTML ="";
var Payment_Item;

switch(bx_nian)
{
case 0:
  Payment_Item = 1;
  break;
case 2:
  Payment_Item = 8;
  break;
case 3:
  Payment_Item = 12  ;
  break
default:
  Payment_Item = 5;
}
/*
计算收益数据
arr_bf[第几年][0]  - 年龄[1]  - 保费[2]  - 保证价值[3]  - 退保归原红利[4]  - 退保特别红利[5]  - 退保总额 [6]  - 最低身故赔偿 [7]  - 身故归原红利
 [8]  - 身故特别红利			   [9]  - 身故赔偿总额			   [10]  - 实际身故赔偿(最低身故赔偿与身故赔偿总额之高者)
*/

for (var i=1; i<=101-bx_age; i++) //求到客户101岁时的利益表
{
  arr_bf[i] = new Array() ;
  arr_bf[i][0] = i+bx_age; //年龄
  if (i <= Payment_Item){ //计算累计保费
     arr_bf[i][1] = i * bx_bf;
  }else{
     arr_bf[i][1] = Payment_Item * bx_bf;
  }
//求保证价值
   arr_bf[i][2]= GetBasic_Bonus(bx_nian,0,i)*bx_be;  
//求退保归原红利   
   arr_bf[i][3]= GetBasic_Bonus(bx_nian,3,i)*bx_be;  
//求退保特别红利   
   arr_bf[i][4]= GetBasic_Bonus(bx_nian,4,i)*bx_be;   
//求退保利益总额   
   arr_bf[i][5]= arr_bf[i][2] + arr_bf[i][3] +arr_bf[i][4];    
//求最低身故赔偿 
//前11年每年额外增加3.5%的保费——前11年=保费*n*(1+3.5%*(i-1)),如果供款12年，那么第12年仍然有额外35%的赔偿
 if(i<=11){
	arr_bf[i][6] =   arr_bf[i][1]*(1+0.035*(i-1));
  }else{
	  if(Payment_Item == 12 ){
		if(i == 12){
		  arr_bf[i][6] =   arr_bf[i][1]*(1+0.35);	
		}else{
			arr_bf[i][6] = arr_bf[12][6] ; 
		}
	  }else{
	   arr_bf[i][6] = arr_bf[11][6] ;
	  }
  }
//求身故归原红利   
   arr_bf[i][7]= GetBasic_Bonus(bx_nian,1,i)*bx_be; 
//求身故特别红利   
   arr_bf[i][8]= GetBasic_Bonus(bx_nian,2,i)*bx_be;  
//求身故赔偿总额
  arr_bf[i][9]= arr_bf[i][2] + arr_bf[i][7] +arr_bf[i][8];   
//求实际赔偿金额（ arr_bf[i][9]跟arr_bf[i][6] 取最高者
  if(arr_bf[i][9]>arr_bf[i][6]){arr_bf[i][10] = arr_bf[i][9]}else{arr_bf[i][10] = arr_bf[i][6]}
     
} 

/*
for (var x=1; x<=20; x++)
{
	trHTML += "<tr><td>"+x+"</td><td>"+arr_bf[x][0]+"岁</td><td>" + parseInt(arr_bf[x][1]) +"</td><td>" + parseInt(arr_bf[x][2]) +"</td><td>" + parseInt(arr_bf[x][3]) +"</td><td>" + parseInt(arr_bf[x][4]) +"</td><td>" + parseInt(arr_bf[x][5]) +"</td><td>" + parseInt(arr_bf[x][6]) +"</td><td>" + parseInt(arr_bf[x][2]) +"</td><td>" + parseInt(arr_bf[x][7]) +"</td><td>" + parseInt(arr_bf[x][8]) +"</td><td>" + parseInt(arr_bf[x][9]) +"</td><td>" + parseInt(arr_bf[x][10]) +"</td></tr>"
	
}
//25年
trHTML += "<tr><td>"+25+"</td><td>"+arr_bf[25][0]+"岁</td><td>" + parseInt(arr_bf[25][1]) +"</td><td>" + parseInt(arr_bf[25][2]) +"</td><td>" + parseInt(arr_bf[25][3]) +"</td><td>" + parseInt(arr_bf[25][4]) +"</td><td>" + parseInt(arr_bf[25][5]) +"</td><td>" + parseInt(arr_bf[25][6]) +"</td><td>" + parseInt(arr_bf[25][2]) +"</td><td>" + parseInt(arr_bf[25][7]) +"</td><td>" + parseInt(arr_bf[25][8]) +"</td><td>" + parseInt(arr_bf[25][9]) +"</td><td>" + parseInt(arr_bf[25][10]) +"</td></tr>" ;

//30年
trHTML += "<tr><td>"+30+"</td><td>"+arr_bf[30][0]+"岁</td><td>" + parseInt(arr_bf[30][1]) +"</td><td>" + parseInt(arr_bf[30][2]) +"</td><td>" + parseInt(arr_bf[30][3]) +"</td><td>" + parseInt(arr_bf[30][4]) +"</td><td>" + parseInt(arr_bf[30][5]) +"</td><td>" + parseInt(arr_bf[30][6]) +"</td><td>" + parseInt(arr_bf[30][2]) +"</td><td>" + parseInt(arr_bf[30][7]) +"</td><td>" + parseInt(arr_bf[30][8]) +"</td><td>" + parseInt(arr_bf[30][9]) +"</td><td>" + parseInt(arr_bf[30][10]) +"</td></tr>" ;


for (var x=56-bx_age; x<=101-bx_age; x+=5)
{
	
trHTML += "<tr><td>"+x+"</td><td>"+arr_bf[x][0]+"岁</td><td>" + parseInt(arr_bf[x][1]) +"</td><td>" + parseInt(arr_bf[x][2]) +"</td><td>" + parseInt(arr_bf[x][3]) +"</td><td>" + parseInt(arr_bf[x][4]) +"</td><td>" + parseInt(arr_bf[x][5]) +"</td><td>" + parseInt(arr_bf[x][6]) +"</td><td>" + parseInt(arr_bf[x][2]) +"</td><td>" + parseInt(arr_bf[x][7]) +"</td><td>" + parseInt(arr_bf[x][8]) +"</td><td>" + parseInt(arr_bf[x][9]) +"</td><td>" + parseInt(arr_bf[x][10]) +"</td></tr>"	
}
*/

for (var x in arr_bf)
{
	trHTML += "<tr><td>"+arr_bf[x][0]+"岁</td><td>" + parseInt(arr_bf[x][1]) +"</td><td>" + parseInt(arr_bf[x][2]) +"</td><td>" + parseInt(arr_bf[x][3]+arr_bf[x][4]) +"</td><td>" + parseInt(arr_bf[x][5]) +"</td><td>" + parseInt(arr_bf[x][6]) +"</td><td>" + parseInt(arr_bf[x][2]) +"</td><td>" + parseInt(arr_bf[x][7]+arr_bf[x][8]) +"</td><td>" + parseInt(arr_bf[x][9]) +"</td><td>" + parseInt(arr_bf[x][10]) +"</td></tr>"
}
	


$("#tbl").append(trHTML);//在table最后面添加一行
}
</script>